
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TRICKS - Standalone App</title>
    <meta name="description" content="TRICKS - соревнования роллеров">
    
    <!-- Telegram WebApp API -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: white;
        }
        
        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .balance {
            background: rgba(245, 158, 11, 0.2);
            padding: 0.25rem 0.5rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        .main-content {
            flex: 1;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .video-feed {
            display: none;
        }
        
        .video-feed.active {
            display: block;
        }
        
        .video-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }
        
        .video-player {
            width: 100%;
            height: 300px;
            background: #000;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.125rem;
        }
        
        .video-info {
            padding: 1rem;
        }
        
        .video-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #1f2937;
        }
        
        .video-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            color: #6b7280;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }
        
        .video-actions {
            display: flex;
            justify-content: space-around;
            padding: 0.5rem 0;
            border-top: 1px solid #e5e7eb;
        }
        
        .action-btn {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.5rem 1rem;
            background: none;
            border: none;
            color: #6b7280;
            cursor: pointer;
            border-radius: 0.5rem;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            background: rgba(99, 102, 241, 0.1);
            color: #6366f1;
        }
        
        .action-btn.liked {
            color: #ef4444;
        }
        
        .tournaments-grid {
            display: none;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }
        
        .tournaments-grid.active {
            display: grid;
        }
        
        .tournament-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        
        .tournament-card:hover {
            transform: translateY(-2px);
        }
        
        .tournament-title {
            font-size: 1.125rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #1f2937;
        }
        
        .tournament-prize {
            color: #f59e0b;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .tournament-participants {
            color: #6b7280;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }
        
        .join-btn {
            width: 100%;
            padding: 0.75rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        
        .join-btn:hover {
            opacity: 0.9;
        }
        
        .top-users {
            display: none;
        }
        
        .top-users.active {
            display: block;
        }
        
        .leaderboard {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .leaderboard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem;
            font-weight: bold;
            text-align: center;
        }
        
        .user-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .user-item:last-child {
            border-bottom: none;
        }
        
        .user-rank {
            font-weight: bold;
            margin-right: 1rem;
            min-width: 2rem;
            color: #f59e0b;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 0.75rem;
        }
        
        .user-details {
            flex: 1;
        }
        
        .user-name {
            font-weight: 500;
            color: #1f2937;
        }
        
        .user-points {
            color: #6b7280;
            font-size: 0.875rem;
        }
        
        .market-section {
            display: none;
        }
        
        .market-section.active {
            display: block;
        }
        
        .market-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .market-item {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 1rem;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .item-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin: 0 auto 0.75rem;
        }
        
        .item-name {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #1f2937;
        }
        
        .item-price {
            color: #f59e0b;
            font-weight: bold;
            margin-bottom: 0.75rem;
        }
        
        .buy-btn {
            width: 100%;
            padding: 0.5rem;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 500;
        }
        
        .buy-btn:hover {
            background: #059669;
        }
        
        .profile-section {
            display: none;
        }
        
        .profile-section.active {
            display: block;
        }
        
        .profile-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: bold;
            margin: 0 auto 1rem;
        }
        
        .profile-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #1f2937;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            color: #6b7280;
            font-size: 0.875rem;
        }
        
        .bottom-nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            padding: 0.75rem;
            display: flex;
            justify-content: space-around;
            position: sticky;
            bottom: 0;
            z-index: 100;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            padding: 0.5rem;
            border: none;
            background: none;
            cursor: pointer;
            border-radius: 0.5rem;
            transition: all 0.2s;
            color: #6b7280;
        }
        
        .nav-item.active {
            color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }
        
        .nav-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .nav-label {
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            z-index: 1000;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            text-align: center;
        }
        
        .modal-title {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #1f2937;
        }
        
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 32px;
            height: 32px;
            border: none;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        @media (max-width: 768px) {
            .main-content {
                padding: 0.5rem;
            }
            
            .video-player {
                height: 250px;
            }
            
            .tournaments-grid {
                grid-template-columns: 1fr;
            }
            
            .market-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .profile-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <h2>TRICKS</h2>
        <p>Загрузка...</p>
    </div>

    <div id="app" class="app-container" style="display: none;">
        <header class="header">
            <div class="logo">TRICKS</div>
            <div class="user-info">
                <div class="avatar" id="userAvatar">U</div>
                <div class="balance" id="userBalance">💰 1,250</div>
            </div>
        </header>

        <main class="main-content">
            <!-- Video Feed Section -->
            <div id="videoFeed" class="video-feed active">
                <div class="video-card">
                    <div class="video-player">
                        🎬 Видео: Kickflip вариация
                    </div>
                    <div class="video-info">
                        <div class="video-title">Kickflip вариация от @skater_pro</div>
                        <div class="video-meta">
                            <span>👀 2.1K</span>
                            <span>💬 45</span>
                            <span>⭐ 8.9</span>
                        </div>
                        <div class="video-actions">
                            <button class="action-btn" onclick="toggleLike(this)">
                                ❤️ <span>234</span>
                            </button>
                            <button class="action-btn" onclick="showModal('comments')">
                                💬 <span>45</span>
                            </button>
                            <button class="action-btn">
                                📤 Поделиться
                            </button>
                        </div>
                    </div>
                </div>

                <div class="video-card">
                    <div class="video-player">
                        🛹 Видео: 360 flip
                    </div>
                    <div class="video-info">
                        <div class="video-title">360 flip в парке от @trick_master</div>
                        <div class="video-meta">
                            <span>👀 1.8K</span>
                            <span>💬 32</span>
                            <span>⭐ 9.2</span>
                        </div>
                        <div class="video-actions">
                            <button class="action-btn" onclick="toggleLike(this)">
                                ❤️ <span>189</span>
                            </button>
                            <button class="action-btn" onclick="showModal('comments')">
                                💬 <span>32</span>
                            </button>
                            <button class="action-btn">
                                📤 Поделиться
                            </button>
                        </div>
                    </div>
                </div>

                <div class="video-card">
                    <div class="video-player">
                        🏆 Видео: Street combo
                    </div>
                    <div class="video-info">
                        <div class="video-title">Street combo от @urban_rider</div>
                        <div class="video-meta">
                            <span>👀 3.2K</span>
                            <span>💬 67</span>
                            <span>⭐ 9.5</span>
                        </div>
                        <div class="video-actions">
                            <button class="action-btn" onclick="toggleLike(this)">
                                ❤️ <span>298</span>
                            </button>
                            <button class="action-btn" onclick="showModal('comments')">
                                💬 <span>67</span>
                            </button>
                            <button class="action-btn">
                                📤 Поделиться
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tournaments Section -->
            <div id="tournaments" class="tournaments-grid">
                <div class="tournament-card">
                    <div class="tournament-title">🏆 Street Battle 2024</div>
                    <div class="tournament-prize">Призовой фонд: 50,000₽</div>
                    <div class="tournament-participants">Участников: 128/200</div>
                    <button class="join-btn" onclick="joinTournament('Street Battle 2024')">
                        Участвовать
                    </button>
                </div>

                <div class="tournament-card">
                    <div class="tournament-title">🛹 Trick Contest</div>
                    <div class="tournament-prize">Призовой фонд: 25,000₽</div>
                    <div class="tournament-participants">Участников: 89/150</div>
                    <button class="join-btn" onclick="joinTournament('Trick Contest')">
                        Участвовать
                    </button>
                </div>

                <div class="tournament-card">
                    <div class="tournament-title">🏅 Beginner Cup</div>
                    <div class="tournament-prize">Призовой фонд: 10,000₽</div>
                    <div class="tournament-participants">Участников: 45/100</div>
                    <button class="join-btn" onclick="joinTournament('Beginner Cup')">
                        Участвовать
                    </button>
                </div>

                <div class="tournament-card">
                    <div class="tournament-title">🎯 Weekly Challenge</div>
                    <div class="tournament-prize">Призовой фонд: 15,000₽</div>
                    <div class="tournament-participants">Участников: 67/100</div>
                    <button class="join-btn" onclick="joinTournament('Weekly Challenge')">
                        Участвовать
                    </button>
                </div>
            </div>

            <!-- Top Users Section -->
            <div id="topUsers" class="top-users">
                <div class="leaderboard">
                    <div class="leaderboard-header">
                        🏆 Топ пользователи
                    </div>
                    <div class="user-item">
                        <div class="user-rank">1</div>
                        <div class="user-avatar">SM</div>
                        <div class="user-details">
                            <div class="user-name">SkaterMaster</div>
                            <div class="user-points">15,240 очков • 89 побед</div>
                        </div>
                    </div>
                    <div class="user-item">
                        <div class="user-rank">2</div>
                        <div class="user-avatar">TK</div>
                        <div class="user-details">
                            <div class="user-name">TrickKing</div>
                            <div class="user-points">14,890 очков • 76 побед</div>
                        </div>
                    </div>
                    <div class="user-item">
                        <div class="user-rank">3</div>
                        <div class="user-avatar">UR</div>
                        <div class="user-details">
                            <div class="user-name">UrbanRider</div>
                            <div class="user-points">13,560 очков • 65 побед</div>
                        </div>
                    </div>
                    <div class="user-item">
                        <div class="user-rank">4</div>
                        <div class="user-avatar">SP</div>
                        <div class="user-details">
                            <div class="user-name">SkaterPro</div>
                            <div class="user-points">12,340 очков • 58 побед</div>
                        </div>
                    </div>
                    <div class="user-item">
                        <div class="user-rank">5</div>
                        <div class="user-avatar">RK</div>
                        <div class="user-details">
                            <div class="user-name">RideKing</div>
                            <div class="user-points">11,890 очков • 52 побед</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Market Section -->
            <div id="market" class="market-section">
                <div class="market-grid">
                    <div class="market-item">
                        <div class="item-icon">🛹</div>
                        <div class="item-name">Новая доска</div>
                        <div class="item-price">500 монет</div>
                        <button class="buy-btn" onclick="buyItem('Новая доска', 500)">Купить</button>
                    </div>
                    <div class="market-item">
                        <div class="item-icon">👕</div>
                        <div class="item-name">Скейт футболка</div>
                        <div class="item-price">200 монет</div>
                        <button class="buy-btn" onclick="buyItem('Скейт футболка', 200)">Купить</button>
                    </div>
                    <div class="market-item">
                        <div class="item-icon">🏆</div>
                        <div class="item-name">Премиум статус</div>
                        <div class="item-price">1000 монет</div>
                        <button class="buy-btn" onclick="buyItem('Премиум статус', 1000)">Купить</button>
                    </div>
                    <div class="market-item">
                        <div class="item-icon">⚡</div>
                        <div class="item-name">Буст XP</div>
                        <div class="item-price">150 монет</div>
                        <button class="buy-btn" onclick="buyItem('Буст XP', 150)">Купить</button>
                    </div>
                    <div class="market-item">
                        <div class="item-icon">🎨</div>
                        <div class="item-name">Кастом скин</div>
                        <div class="item-price">300 монет</div>
                        <button class="buy-btn" onclick="buyItem('Кастом скин', 300)">Купить</button>
                    </div>
                    <div class="market-item">
                        <div class="item-icon">🔥</div>
                        <div class="item-name">Спецэффекты</div>
                        <div class="item-price">400 монет</div>
                        <button class="buy-btn" onclick="buyItem('Спецэффекты', 400)">Купить</button>
                    </div>
                </div>
            </div>

            <!-- Profile Section -->
            <div id="profile" class="profile-section">
                <div class="profile-card">
                    <div class="profile-avatar" id="profileAvatar">U</div>
                    <div class="profile-name" id="profileName">Пользователь</div>
                    <div class="profile-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="userVideos">12</div>
                            <div class="stat-label">Видео</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="userFollowers">2.1K</div>
                            <div class="stat-label">Подписчики</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="userRating">8.9</div>
                            <div class="stat-label">Рейтинг</div>
                        </div>
                    </div>
                </div>

                <div class="video-card">
                    <div class="video-player">
                        🎬 Мое последнее видео
                    </div>
                    <div class="video-info">
                        <div class="video-title">Мой лучший трик</div>
                        <div class="video-meta">
                            <span>👀 856</span>
                            <span>💬 23</span>
                            <span>⭐ 9.1</span>
                        </div>
                        <div class="video-actions">
                            <button class="action-btn">
                                ✏️ Редактировать
                            </button>
                            <button class="action-btn">
                                📊 Статистика
                            </button>
                            <button class="action-btn">
                                🗑️ Удалить
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <nav class="bottom-nav">
            <button class="nav-item active" onclick="switchTab('home', this)">
                <div class="nav-icon">🏠</div>
                <div class="nav-label">Главная</div>
            </button>
            <button class="nav-item" onclick="switchTab('tournaments', this)">
                <div class="nav-icon">🏆</div>
                <div class="nav-label">Турниры</div>
            </button>
            <button class="nav-item" onclick="switchTab('top', this)">
                <div class="nav-icon">👑</div>
                <div class="nav-label">Топ</div>
            </button>
            <button class="nav-item" onclick="switchTab('market', this)">
                <div class="nav-icon">🛒</div>
                <div class="nav-label">Магазин</div>
            </button>
            <button class="nav-item" onclick="switchTab('profile', this)">
                <div class="nav-icon">👤</div>
                <div class="nav-label">Профиль</div>
            </button>
        </nav>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">✕</button>
            <div id="modalContent">
                <div class="modal-title">Комментарии</div>
                <p>Здесь будут отображаться комментарии к видео...</p>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentUser = {
            id: 'user_' + Date.now(),
            name: 'Пользователь',
            avatar: 'U',
            balance: 1250,
            videos: 12,
            followers: 2100,
            rating: 8.9
        };

        // Initialize app
        function initializeApp() {
            console.log('🚀 TRICKS Standalone загружается...');
            
            // Initialize Telegram WebApp if available
            if (typeof window !== 'undefined' && window.Telegram?.WebApp) {
                const tg = window.Telegram.WebApp;
                console.log('⚡ Инициализация Telegram WebApp');
                
                tg.ready();
                if (typeof tg.expand === 'function') {
                    tg.expand();
                }
                tg.enableClosingConfirmation();
                
                // Get user data from Telegram
                const telegramUser = tg.initDataUnsafe?.user;
                if (telegramUser) {
                    currentUser.name = telegramUser.first_name || 'Пользователь';
                    currentUser.avatar = telegramUser.first_name?.charAt(0) || 'U';
                }
                
                console.log('✅ Telegram WebApp готов:', {
                    user: currentUser.name,
                    platform: tg.platform || 'unknown'
                });
            }
            
            // Update UI with user data
            updateUserInterface();
            
            // Hide loading and show app
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('app').style.display = 'flex';
            }, 1500);
        }

        function updateUserInterface() {
            document.getElementById('userAvatar').textContent = currentUser.avatar;
            document.getElementById('userBalance').textContent = `💰 ${currentUser.balance.toLocaleString()}`;
            document.getElementById('profileAvatar').textContent = currentUser.avatar;
            document.getElementById('profileName').textContent = currentUser.name;
            document.getElementById('userVideos').textContent = currentUser.videos;
            document.getElementById('userFollowers').textContent = currentUser.followers > 1000 ? 
                (currentUser.followers / 1000).toFixed(1) + 'K' : currentUser.followers;
            document.getElementById('userRating').textContent = currentUser.rating;
        }

        function switchTab(tabName, buttonElement) {
            console.log('Переключение на вкладку:', tabName);
            
            // Hide all sections
            const sections = ['videoFeed', 'tournaments', 'topUsers', 'market', 'profile'];
            sections.forEach(section => {
                const element = document.getElementById(section);
                if (element) {
                    element.classList.remove('active');
                }
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected section
            const targetMap = {
                'home': 'videoFeed',
                'tournaments': 'tournaments',
                'top': 'topUsers',
                'market': 'market',
                'profile': 'profile'
            };
            
            const targetSection = document.getElementById(targetMap[tabName]);
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            // Add active class to clicked nav item
            buttonElement.classList.add('active');
            
            // Telegram haptic feedback
            if (window.Telegram?.WebApp?.HapticFeedback) {
                window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
            }
        }

        function toggleLike(button) {
            const isLiked = button.classList.contains('liked');
            const countSpan = button.querySelector('span');
            let count = parseInt(countSpan.textContent);
            
            if (isLiked) {
                button.classList.remove('liked');
                count--;
            } else {
                button.classList.add('liked');
                count++;
            }
            
            countSpan.textContent = count;
            
            // Telegram haptic feedback
            if (window.Telegram?.WebApp?.HapticFeedback) {
                window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
            }
            
            console.log('Лайк:', isLiked ? 'убран' : 'поставлен');
        }

        function joinTournament(tournamentName) {
            console.log('Участие в турнире:', tournamentName);
            
            if (currentUser.balance >= 100) {
                currentUser.balance -= 100;
                updateUserInterface();
                
                showNotification(`Вы зарегистрированы в турнире "${tournamentName}"!`, 'success');
                
                // Telegram haptic feedback
                if (window.Telegram?.WebApp?.HapticFeedback) {
                    window.Telegram.WebApp.HapticFeedback.notificationOccurred('success');
                }
            } else {
                showNotification('Недостаточно средств для участия в турнире', 'error');
                
                if (window.Telegram?.WebApp?.HapticFeedback) {
                    window.Telegram.WebApp.HapticFeedback.notificationOccurred('error');
                }
            }
        }

        function buyItem(itemName, price) {
            console.log('Покупка предмета:', itemName, 'за', price, 'монет');
            
            if (currentUser.balance >= price) {
                currentUser.balance -= price;
                updateUserInterface();
                
                showNotification(`Вы купили "${itemName}" за ${price} монет!`, 'success');
                
                // Telegram haptic feedback
                if (window.Telegram?.WebApp?.HapticFeedback) {
                    window.Telegram.WebApp.HapticFeedback.notificationOccurred('success');
                }
            } else {
                showNotification('Недостаточно монет для покупки', 'error');
                
                if (window.Telegram?.WebApp?.HapticFeedback) {
                    window.Telegram.WebApp.HapticFeedback.notificationOccurred('error');
                }
            }
        }

        function showModal(type) {
            const modal = document.getElementById('modal');
            const content = document.getElementById('modalContent');
            
            if (type === 'comments') {
                content.innerHTML = `
                    <div class="modal-title">💬 Комментарии</div>
                    <div style="text-align: left; margin-top: 1rem;">
                        <div style="padding: 0.75rem; background: #f3f4f6; border-radius: 0.5rem; margin-bottom: 0.5rem;">
                            <strong>SkaterPro:</strong> Крутой трик! 🔥
                        </div>
                        <div style="padding: 0.75rem; background: #f3f4f6; border-radius: 0.5rem; margin-bottom: 0.5rem;">
                            <strong>TrickMaster:</strong> Научи меня так делать! 🙏
                        </div>
                        <div style="padding: 0.75rem; background: #f3f4f6; border-radius: 0.5rem;">
                            <strong>UrbanRider:</strong> Отличное исполнение! ⭐
                        </div>
                    </div>
                `;
            }
            
            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        function showNotification(message, type) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 2rem;
                left: 50%;
                transform: translateX(-50%);
                background: ${type === 'success' ? '#10b981' : '#ef4444'};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 0.5rem;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
                z-index: 2000;
                font-weight: 500;
                opacity: 0;
                transition: opacity 0.3s;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Show notification
            setTimeout(() => {
                notification.style.opacity = '1';
            }, 100);
            
            // Hide notification after 3 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Handle modal click outside
        document.getElementById('modal').addEventListener('click', (e) => {
            if (e.target.id === 'modal') {
                closeModal();
            }
        });

        // Handle escape key for modal
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // Prevent context menu on mobile
        document.addEventListener('contextmenu', (e) => {
            e.preventDefault();
        });

        // Initialize app when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }

        console.log('✅ TRICKS Standalone готов к запуску');
    </script>
</body>
</html>
